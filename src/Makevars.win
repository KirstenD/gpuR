CXX_STD = CXX11
PKG_CPPFLAGS = -I. -I../inst/include
PKG_LIBS = -L../inst/include/loader -lOpenCL

.PHONY: clean

$(SHLIB): ../inst/include/loader/libOpenCL.a

loader/libOpenCL.a:
	cd ../inst/include/loader/ && $(MAKE) libOpenCL.a \
	CC="$(CC)" CFLAGS="$(ALL_CFLAGS)" AR="$(AR)" RM="$(RM)" \
	ICD_OS=icd_windows

clean:
	$(RM) *.o
	$(RM) *.dll
	$(RM) *.so
	$(RM) *.dylib
	cd ../inst/include/loader && $(MAKE) clean
